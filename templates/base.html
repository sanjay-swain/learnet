<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{% block  title %}Home{% endblock title %}</title>
	<script src="https://kit.fontawesome.com/bd416e7b0f.js" crossorigin="anonymous"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>
<body>

	<nav class="navbar is-white has-shadow">
		<div class="navbar-brand">
			<a href="/" class="navbar-item">
				LOTAC
			</a>
			<a class="navbar-burger" id="burger">
        <span></span>
        <span></span>
        <span></span>
      </a>
		</div>

		<div class="navbar-menu" id="nav-links">
			<div class="navbar-start">
				<a href="{% url 'subjects' %}" class="navbar-item">
					Courses
				</a>
			</div>

			<div class="navbar-end">
				<div class="navbar-item">
					{% if not user.is_authenticated %}
					<a href="{% url 'login' %}" class="button is-primary">
						Log In
					</a>
					{% else %}
					<a href="{% url 'logout' %}" class="button is-light">
						Log Out
					</a>
					{% endif %}
				</div>
			</div>
		</div>
	</nav>

	<div class="container mt-5">
		<!-- messages div -->
		{% if messages %}
			<div class="notification is-success">
				<button class="delete"></button>
				{% for message in messages %}
					<p>
						{% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
							{{ message }}
						{% endif %}
					</p>
				{% endfor %}
			</div>
		{% endif %}

		<nav class="breadcrumb has-succeeds-separator">
			{% if current_video %}
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/courses/">Courses</a></li>
				<li><a href="/courses/{{ current_subject.url }}/">{{ current_subject.title }}</a></li>
				<li><a href="/courses/{{ current_subject.url }}/{{ current_chapter.url }}">{{ current_chapter.title }}</a></li>
				<li class="is-active"><a href="#">{{ current_video.title }}</a></li>
			</ul>

			{% elif current_chapter %}
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/courses/">Courses</a></li>
				<li><a href="/courses/{{ current_subject.url }}/">{{ current_subject.title }}</a></li>
				<li class="is-active"><a href="#">{{ current_chapter.title }}</a></li>
			</ul>

			{% elif current_subject %}
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/courses/">Courses</a></li>
				<li><a href="/courses/{{ current_subject.url }}/">{{ current_subject.title }}</a></li>
			</ul>

			{% elif subjects %}
			<ul>
				<li><a href="/">Home</a></li>
				<li><a href="/courses/">Courses</a></li>
			</ul>			
			{% endif %}
		</nav>
		{% block content %}
		{% endblock content %}
	</div>

	<script>
		const burgerIcon = document.querySelector('#burger');
		const navbarMenu = document.querySelector('#nav-links');

		burgerIcon.addEventListener('click', () => {
				navbarMenu.classList.toggle('is-active');
		});
		
		document.addEventListener('DOMContentLoaded', () => {
			(document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
				const $notification = $delete.parentNode;

				$delete.addEventListener('click', () => {
					$notification.parentNode.removeChild($notification);
				});
			});
		});
	</script>
</body>
</html>
